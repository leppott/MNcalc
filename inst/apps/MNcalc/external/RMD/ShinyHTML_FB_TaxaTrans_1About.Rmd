---
title: "Taxa Translator, About"
date: "2024-05-06"
output: html_fragment
editor_options: 
  markdown: 
    wrap: 72
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE
                      , results = 'asis'
                      , warning = FALSE
                      , message = FALSE)
```

# Prepare an input file within the app (File Builder)

Advantages of using the File Builder are:

-   Fewer required fields.

-   Ensures use of Proper Operational Taxonomic Units (OTUs) and
    attributes/traits.

-   Flexibility with names of column headings (Click on the drop-down
    menus. The list of fields in your input file will appear. Select the
    correct column headings).

The File Builder joins the taxon name in the input file with the
‘original taxaID’ column in the
<a href="https://github.com/leppott/BioMonTools_SupportFiles/tree/main/data/taxa_official/MN" target="blank">MPCA
Taxa Translator table</a> and performs two functions:

-   Translates the original taxon name to the proper OTU for the
    calculation (for example, collapses worms to Oligochaeta).

-   Adds in new columns with taxa attributes and hierarchy (e.g., Order,
    Family) that are needed for the metric calculations.

Index_Class
[<a href="https://github.com/leppott/MNcalc/raw/main/inst/apps/MNcalc/www/links/IndexClass_MN_20240626.csv" target="blank">CSV</a>]
is another required field. It tells R which BCG rules and IBI metrics to
apply.

Index_Name (MN_IBI_Bugs, MN_IBI_Fish or MN_BCG) is also required but is
autopopulated based upon which Calculation you select.

The input file must be a comma-separated file (CSV). Required fields
vary slightly across the four Calculations.

```{r table_req}
# Packages
library(readxl)
library(knitr)
library(kableExtra)
#library(DT)

# Data
fn <- "BCGcalc_ReqFields_20230203.xlsx"
path <- file.path("files", fn)
df <- read_excel(path, sheet = "MN_ReqField_Sum")

# Table (DT)
# cap_req <- "Table 1. Required fields."
# DT::datatable(df_req
#               , filter = "top"
#               , caption = cap_req
#               , options = list(scrollX = TRUE
#                                , autoWidth = TRUE)
#               )
# DT::datatable(iris) # not working correctly in fragment
df %>%
  kable() %>%
  kable_styling(full_width = F, position = "left")
```

For more detailed information about the BCG and IBI calculations, see
the reports on the References page.

For guidance on how to interpret the results, see the Metadata page.

IMPORTANT: Data must be collected using MPCA field and laboratory
protocols (see MPCA 2017 reports on the References page).

------------------------------------------------------------------------

*Last updated: 2024-07-15*
